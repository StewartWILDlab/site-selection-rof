<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ROF Site Selection - Land Cover Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Site Analysis</a></li><li class="breadcrumb-item"><a href="./index.html">Land Cover Analysis</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ROF Site Selection</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/StewartWILDlab/site-selection-rof">
            Source Code
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Site Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Land Cover Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link active" data-scroll-target="#loading-data">Loading data</a></li>
  <li><a href="#plotting-spatial-data" id="toc-plotting-spatial-data" class="nav-link" data-scroll-target="#plotting-spatial-data">Plotting spatial data</a></li>
  <li><a href="#extracting-land-cover-data" id="toc-extracting-land-cover-data" class="nav-link" data-scroll-target="#extracting-land-cover-data">Extracting Land Cover data</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Site Analysis</a></li><li class="breadcrumb-item"><a href="./index.html">Land Cover Analysis</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Land Cover Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading data</h2>
<p>We load the possible sites (<code>quiet = TRUE</code> is for not displaying verbose loading information). We also load the two halves of the far north land cover dataset, along with the the attribute table of land cover classes. We load the ecodistrict data and select for the relevant lowlands disctrict, coded as 1028.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>sites_possible <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/sites/GRTS_PossibleCaARU_sample_draw_base.shp"</span>, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"GRTS_PossibleCaARU_sample_draw_base"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fullID =</span> <span class="fu">paste</span>(SampleID, ID, source, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>additional_sites <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/sites/Selected_Peat_Sites.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_as_sf</span>(<span class="at">coords=</span><span class="fu">c</span>(<span class="st">"lon_WGS84"</span>, <span class="st">"lat_WGS84"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(sites_possible)) <span class="sc">|&gt;</span> </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"Selected_Peat_Sites"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fullID =</span> <span class="fu">paste</span>(SampleID, ID, source, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>all_sites <span class="ot">&lt;-</span> sites_possible <span class="sc">|&gt;</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(additional_sites)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>ecodistrict <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/ecodistrict_shp/Ecodistricts/ecodistricts.shp"</span>, </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ECODISTRIC <span class="sc">==</span> <span class="dv">1028</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>lu_16 <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">raster</span>(<span class="st">"data/land_use/FarNorth_LandCover_Class_UTM16.tif"</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>lu_17 <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">raster</span>(<span class="st">"data/land_use/FarNorth_LandCover_Class_UTM17.tif"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>lu_dat <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/land_use/attr_table_northen_ont_lc.txt"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cats =</span> <span class="fu">as.factor</span>(code))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotting-spatial-data" class="level2">
<h2 class="anchored" data-anchor-id="plotting-spatial-data">Plotting spatial data</h2>
<p>It is always a good idea to try and plot spatial data before any processing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> ecodistrict) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(all_sites, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                                  sf<span class="sc">::</span><span class="fu">st_crs</span>(ecodistrict))) <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" data-fig-pos="H" width="1248"></p>
</figure>
</div>
</div>
</div>
<p>Plotting the land cover data is difficult because it is provided is two different UTMs.</p>
</section>
<section id="extracting-land-cover-data" class="level2">
<h2 class="anchored" data-anchor-id="extracting-land-cover-data">Extracting Land Cover data</h2>
<p>The following functions will take care of land cover extraction for sites.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>extract_from_points <span class="ot">&lt;-</span> <span class="cf">function</span>(scale_m, sites, lu) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  sites_buffer <span class="ot">&lt;-</span> sites <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_transform</span>(sf<span class="sc">::</span><span class="fu">st_crs</span>(lu)) <span class="sc">|&gt;</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    sf<span class="sc">::</span><span class="fu">st_buffer</span>(<span class="at">dist =</span> scale_m) <span class="sc">|&gt;</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(fullID)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  extr <span class="ot">&lt;-</span> exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(lu, sites_buffer,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">progress =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">include_cols =</span> <span class="st">"fullID"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  extr <span class="ot">&lt;-</span> <span class="fu">mapply</span>(extr, <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(extr), </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">FUN =</span> \(x, y) dplyr<span class="sc">::</span><span class="fu">mutate</span>(x, <span class="at">id =</span> y),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>                 <span class="at">SIMPLIFY =</span> F)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  extr_df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, extr) <span class="sc">|&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(id)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(extr_df)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>compute_land_cover <span class="ot">&lt;-</span> <span class="cf">function</span>(scale_m, sites, </span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                               lu_16, lu_17, lu_dat,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                               <span class="at">summarise_all =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  extr_16_df <span class="ot">&lt;-</span> <span class="fu">extract_from_points</span>(scale_m, sites, lu_16)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  extr_17_df <span class="ot">&lt;-</span> <span class="fu">extract_from_points</span>(scale_m, sites, lu_17)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="sc">!</span>(extr_16_df<span class="sc">$</span>siteID <span class="sc">%in%</span> extr_17_df<span class="sc">$</span>siteID)))</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  extr <span class="ot">&lt;-</span> <span class="fu">rbind</span>(extr_16_df, extr_17_df) <span class="sc">|&gt;</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">arrange</span>(id, value)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (summarise_all) {</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    extr_table <span class="ot">&lt;-</span> extr <span class="sc">|&gt;</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">group_by</span>(value) <span class="sc">|&gt;</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">coverage_fraction_sum =</span> <span class="fu">sum</span>(coverage_fraction)) <span class="sc">|&gt;</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>                      coverage_fraction_sum<span class="sc">/</span><span class="fu">sum</span>(coverage_fraction_sum)) <span class="sc">|&gt;</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">ungroup</span>()  <span class="sc">|&gt;</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.factor</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">left_join</span>(lu_dat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"value"</span> <span class="ot">=</span> <span class="st">"cats"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(category_code, prop, label)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>     extr_table <span class="ot">&lt;-</span> extr <span class="sc">|&gt;</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">group_by</span>(fullID, value) <span class="sc">|&gt;</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">coverage_fraction_sum =</span> <span class="fu">sum</span>(coverage_fraction)) <span class="sc">|&gt;</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> </span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>                      coverage_fraction_sum<span class="sc">/</span><span class="fu">sum</span>(coverage_fraction_sum)) <span class="sc">|&gt;</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">ungroup</span>()  <span class="sc">|&gt;</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.factor</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">left_join</span>(lu_dat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"value"</span> <span class="ot">=</span> <span class="st">"cats"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(fullID, category_code, prop, label)</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>  extr_table[<span class="fu">is.na</span>(extr_table)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(extr_table)</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We extract at different scales (buffer radius around points): 1 m, 50 m, 100 m and 1 km.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>res_points <span class="ot">&lt;-</span> <span class="fu">mapply</span>(<span class="at">FUN =</span> compute_land_cover, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">c</span>(<span class="st">`</span><span class="at">1 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">`</span><span class="at">50 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">50</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">100 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">100</span>, <span class="st">`</span><span class="at">1 km</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1000</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">MoreArgs =</span> <span class="fu">list</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">sites =</span> sites_possible,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">lu_16 =</span> lu_16, <span class="at">lu_17 =</span> lu_17, <span class="at">lu_dat =</span> lu_dat),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">SIMPLIFY =</span> F) <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">'scale'</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">scale =</span> forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(scale, <span class="st">"1 m"</span>, <span class="st">"50 m"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"100 m"</span>, <span class="st">"1 km"</span>),</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span>  forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(label, prop)) <span class="sc">|&gt;</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(scale, dplyr<span class="sc">::</span><span class="fu">desc</span>(prop))</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(res_points)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">scale</th>
<th style="text-align: left;">category_code</th>
<th style="text-align: right;">prop</th>
<th style="text-align: left;">label</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">TrBOG</td>
<td style="text-align: right;">0.26</td>
<td style="text-align: left;">Treed Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">TrFEN</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Treed Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">OBOG</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;">Open Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">ConSWA</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: left;">Coniferous Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">ConTRE</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: left;">Coniferous Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">OFEN</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: left;">Open Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">SpTRE</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: left;">Sparse Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 m</td>
<td style="text-align: left;">MixTRE</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: left;">Mixed Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">TrBOG</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Treed Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">TrFEN</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: left;">Treed Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">OBOG</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Open Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">ConSWA</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: left;">Coniferous Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">ConTRE</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: left;">Coniferous Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">OFEN</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: left;">Open Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">SpTRE</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: left;">Sparse Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">MixTRE</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: left;">Mixed Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">WAT</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Clear Open Water</td>
</tr>
<tr class="even">
<td style="text-align: left;">50 m</td>
<td style="text-align: left;">XWAT</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Turbid Water</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">TrBOG</td>
<td style="text-align: right;">0.23</td>
<td style="text-align: left;">Treed Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">TrFEN</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: left;">Treed Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">OBOG</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;">Open Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">ConSWA</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: left;">Coniferous Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">ConTRE</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: left;">Coniferous Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">OFEN</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: left;">Open Fen</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">WAT</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: left;">Clear Open Water</td>
</tr>
<tr class="even">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">SpTRE</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: left;">Sparse Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">MixTRE</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Mixed Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">100 m</td>
<td style="text-align: left;">XWAT</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Turbid Water</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">TrFEN</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Treed Fen</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">TrBOG</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: left;">Treed Bog</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">OBOG</td>
<td style="text-align: right;">0.19</td>
<td style="text-align: left;">Open Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">ConSWA</td>
<td style="text-align: right;">0.17</td>
<td style="text-align: left;">Coniferous Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">OFEN</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: left;">Open Fen</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">ConTRE</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: left;">Coniferous Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">WAT</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: left;">Clear Open Water</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">MixTRE</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Mixed Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">XWAT</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Turbid Water</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">ThSWA</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Thicket Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">SpTRE</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Sparse Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">NSWood</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Disturbance - Non and Sparse Woody</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">DecTRE</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Deciduous Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">TrOrSHr</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Disturbance - Treed and/or Shrub</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 km</td>
<td style="text-align: left;">BED</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Bedrock</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We also want to do the same operation for the ecodistrict to allow for comparison. We don’t need to use exact extraction, insteadt the crop and mask each raster. This operation is costly so we write out the rasters and load them again (see unrendered code).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ecodistrict_16 <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(ecodistrict, sf<span class="sc">::</span><span class="fu">st_crs</span>(lu_16))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ecodistrict_17 <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_transform</span>(ecodistrict, sf<span class="sc">::</span><span class="fu">st_crs</span>(lu_17))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>lu_16_crop <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">crop</span>(lu_16, ecodistrict_16)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>lu_16_crop_mask <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">mask</span>(lu_16_crop, ecodistrict_16)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>lu_17_crop <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">crop</span>(lu_17, ecodistrict_17)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>lu_17_crop_mask <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">mask</span>(lu_17_crop, ecodistrict_17)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then get the frequencies of values. This operation is also costly so we write out the objects and load them again (see unrendered code).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>lu_16_freq <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">freq</span>(lu_16_crop_mask)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>lu_17_freq <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">freq</span>(lu_17_crop_mask)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We combine the results of both UTMs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>res_ecodistrict <span class="ot">&lt;-</span> <span class="fu">rbind</span>(lu_16_freq, lu_17_freq) <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(value) <span class="sc">|&gt;</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">sum</span>(count)) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">|&gt;</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> count<span class="sc">/</span><span class="fu">sum</span>(count)) <span class="sc">|&gt;</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.factor</span>(value)) <span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(lu_dat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"value"</span> <span class="ot">=</span> <span class="st">"cats"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(label)) <span class="sc">|&gt;</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(category_code, prop, label) <span class="sc">|&gt;</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">scale =</span> <span class="st">"Ecodistrict"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(scale) <span class="sc">|&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(scale, dplyr<span class="sc">::</span><span class="fu">desc</span>(prop))</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(res_ecodistrict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">scale</th>
<th style="text-align: left;">category_code</th>
<th style="text-align: right;">prop</th>
<th style="text-align: left;">label</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">TrFEN</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: left;">Treed Fen</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">OBOG</td>
<td style="text-align: right;">0.20</td>
<td style="text-align: left;">Open Bog</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">TrBOG</td>
<td style="text-align: right;">0.19</td>
<td style="text-align: left;">Treed Bog</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">ConSWA</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: left;">Coniferous Swamp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">OFEN</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: left;">Open Fen</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">WAT</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: left;">Clear Open Water</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">ConTRE</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: left;">Coniferous Treed</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">NSWood</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Disturbance - Non and Sparse Woody</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">TrOrSHr</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Disturbance - Treed and/or Shrub</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">MixTRE</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Mixed Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">ThSWA</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: left;">Thicket Swamp</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">SpTRE</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Sparse Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">XWAT</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Turbid Water</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">DecTRE</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Deciduous Treed</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">MIN</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Sand/Gravel/Mine Tailings</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">FrMAR</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Freshwater Marsh</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">BED</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Bedrock</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">URB</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Community/Infrastructure</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">DecSWA</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Deciduous Swamp</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ecodistrict</td>
<td style="text-align: left;">InMAR</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Intertidal Marsh</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>And then combine the results between scales and utm.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">rbind</span>(res_points, res_ecodistrict) <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">complete</span>(scale, label) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">prop =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">label =</span> forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(label, prop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For individual site identity, at different scales:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>res_points_by_site <span class="ot">&lt;-</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mapply</span>(<span class="at">FUN =</span> compute_land_cover, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">c</span>(<span class="st">`</span><span class="at">1 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">`</span><span class="at">50 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">50</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">`</span><span class="at">100 m</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">100</span>, <span class="st">`</span><span class="at">1 km</span><span class="st">`</span> <span class="ot">=</span> <span class="dv">1000</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">MoreArgs =</span> <span class="fu">list</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">sites =</span> sites_possible,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">lu_16 =</span> lu_16, <span class="at">lu_17 =</span> lu_17, <span class="at">lu_dat =</span> lu_dat),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">summarise_all =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">SIMPLIFY =</span> F) <span class="sc">|&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">'scale'</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">scale =</span> forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(scale, <span class="st">"1 m"</span>, <span class="st">"50 m"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"100 m"</span>, <span class="st">"1 km"</span>),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span>  forcats<span class="sc">::</span><span class="fu">fct_reorder</span>(label, prop)) <span class="sc">|&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(scale, fullID)  <span class="sc">|&gt;</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(prop)) <span class="sc">|&gt;</span> </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">primary_category_code =</span> category_code,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">primary_prop =</span> prop,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">primary_label =</span> label) <span class="sc">|&gt;</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">secondary_category_code =</span> primary_category_code[<span class="dv">2</span>],</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">secondary_prop =</span> primary_prop[<span class="dv">2</span>],</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">secondary_label =</span> primary_label[<span class="dv">2</span>],</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>                <span class="at">prop_sum =</span> primary_prop <span class="sc">+</span> secondary_prop) <span class="sc">|&gt;</span> </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(fullID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'fullID'. You can override using the
`.groups` argument.
`summarise()` has grouped output by 'fullID'. You can override using the
`.groups` argument.
`summarise()` has grouped output by 'fullID'. You can override using the
`.groups` argument.
`summarise()` has grouped output by 'fullID'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(res_points_by_site)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f68c2885de305f02411e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f68c2885de305f02411e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200"],["1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km","1 m","50 m","100 m","1 km"],["P094-5_85_GRTS_PossibleCaARU_sample_draw_base","P094-5_85_GRTS_PossibleCaARU_sample_draw_base","P094-5_85_GRTS_PossibleCaARU_sample_draw_base","P094-5_85_GRTS_PossibleCaARU_sample_draw_base","P095-3_70_GRTS_PossibleCaARU_sample_draw_base","P095-3_70_GRTS_PossibleCaARU_sample_draw_base","P095-3_70_GRTS_PossibleCaARU_sample_draw_base","P095-3_70_GRTS_PossibleCaARU_sample_draw_base","P115-2_113_GRTS_PossibleCaARU_sample_draw_base","P115-2_113_GRTS_PossibleCaARU_sample_draw_base","P115-2_113_GRTS_PossibleCaARU_sample_draw_base","P115-2_113_GRTS_PossibleCaARU_sample_draw_base","P121-1_79_GRTS_PossibleCaARU_sample_draw_base","P121-1_79_GRTS_PossibleCaARU_sample_draw_base","P121-1_79_GRTS_PossibleCaARU_sample_draw_base","P121-1_79_GRTS_PossibleCaARU_sample_draw_base","P121-3_81_GRTS_PossibleCaARU_sample_draw_base","P121-3_81_GRTS_PossibleCaARU_sample_draw_base","P121-3_81_GRTS_PossibleCaARU_sample_draw_base","P121-3_81_GRTS_PossibleCaARU_sample_draw_base","P145-2_128_GRTS_PossibleCaARU_sample_draw_base","P145-2_128_GRTS_PossibleCaARU_sample_draw_base","P145-2_128_GRTS_PossibleCaARU_sample_draw_base","P145-2_128_GRTS_PossibleCaARU_sample_draw_base","P145-3_129_GRTS_PossibleCaARU_sample_draw_base","P145-3_129_GRTS_PossibleCaARU_sample_draw_base","P145-3_129_GRTS_PossibleCaARU_sample_draw_base","P145-3_129_GRTS_PossibleCaARU_sample_draw_base","P154-1_94_GRTS_PossibleCaARU_sample_draw_base","P154-1_94_GRTS_PossibleCaARU_sample_draw_base","P154-1_94_GRTS_PossibleCaARU_sample_draw_base","P154-1_94_GRTS_PossibleCaARU_sample_draw_base","P158-4_106_GRTS_PossibleCaARU_sample_draw_base","P158-4_106_GRTS_PossibleCaARU_sample_draw_base","P158-4_106_GRTS_PossibleCaARU_sample_draw_base","P158-4_106_GRTS_PossibleCaARU_sample_draw_base","P161-1_119_GRTS_PossibleCaARU_sample_draw_base","P161-1_119_GRTS_PossibleCaARU_sample_draw_base","P161-1_119_GRTS_PossibleCaARU_sample_draw_base","P161-1_119_GRTS_PossibleCaARU_sample_draw_base","P176-1_62_GRTS_PossibleCaARU_sample_draw_base","P176-1_62_GRTS_PossibleCaARU_sample_draw_base","P176-1_62_GRTS_PossibleCaARU_sample_draw_base","P176-1_62_GRTS_PossibleCaARU_sample_draw_base","P200-1_90_GRTS_PossibleCaARU_sample_draw_base","P200-1_90_GRTS_PossibleCaARU_sample_draw_base","P200-1_90_GRTS_PossibleCaARU_sample_draw_base","P200-1_90_GRTS_PossibleCaARU_sample_draw_base","P218-5_77_GRTS_PossibleCaARU_sample_draw_base","P218-5_77_GRTS_PossibleCaARU_sample_draw_base","P218-5_77_GRTS_PossibleCaARU_sample_draw_base","P218-5_77_GRTS_PossibleCaARU_sample_draw_base","P218-6_78_GRTS_PossibleCaARU_sample_draw_base","P218-6_78_GRTS_PossibleCaARU_sample_draw_base","P218-6_78_GRTS_PossibleCaARU_sample_draw_base","P218-6_78_GRTS_PossibleCaARU_sample_draw_base","P219-7_89_GRTS_PossibleCaARU_sample_draw_base","P219-7_89_GRTS_PossibleCaARU_sample_draw_base","P219-7_89_GRTS_PossibleCaARU_sample_draw_base","P219-7_89_GRTS_PossibleCaARU_sample_draw_base","P229-2_2_GRTS_PossibleCaARU_sample_draw_base","P229-2_2_GRTS_PossibleCaARU_sample_draw_base","P229-2_2_GRTS_PossibleCaARU_sample_draw_base","P229-2_2_GRTS_PossibleCaARU_sample_draw_base","P237-2_6_GRTS_PossibleCaARU_sample_draw_base","P237-2_6_GRTS_PossibleCaARU_sample_draw_base","P237-2_6_GRTS_PossibleCaARU_sample_draw_base","P237-2_6_GRTS_PossibleCaARU_sample_draw_base","P238-2_116_GRTS_PossibleCaARU_sample_draw_base","P238-2_116_GRTS_PossibleCaARU_sample_draw_base","P238-2_116_GRTS_PossibleCaARU_sample_draw_base","P238-2_116_GRTS_PossibleCaARU_sample_draw_base","P245-1_9_GRTS_PossibleCaARU_sample_draw_base","P245-1_9_GRTS_PossibleCaARU_sample_draw_base","P245-1_9_GRTS_PossibleCaARU_sample_draw_base","P245-1_9_GRTS_PossibleCaARU_sample_draw_base","P245-3_11_GRTS_PossibleCaARU_sample_draw_base","P245-3_11_GRTS_PossibleCaARU_sample_draw_base","P245-3_11_GRTS_PossibleCaARU_sample_draw_base","P245-3_11_GRTS_PossibleCaARU_sample_draw_base","P246-2_14_GRTS_PossibleCaARU_sample_draw_base","P246-2_14_GRTS_PossibleCaARU_sample_draw_base","P246-2_14_GRTS_PossibleCaARU_sample_draw_base","P246-2_14_GRTS_PossibleCaARU_sample_draw_base","P246-4_16_GRTS_PossibleCaARU_sample_draw_base","P246-4_16_GRTS_PossibleCaARU_sample_draw_base","P246-4_16_GRTS_PossibleCaARU_sample_draw_base","P246-4_16_GRTS_PossibleCaARU_sample_draw_base","P258-2_51_GRTS_PossibleCaARU_sample_draw_base","P258-2_51_GRTS_PossibleCaARU_sample_draw_base","P258-2_51_GRTS_PossibleCaARU_sample_draw_base","P258-2_51_GRTS_PossibleCaARU_sample_draw_base","P264-2_108_GRTS_PossibleCaARU_sample_draw_base","P264-2_108_GRTS_PossibleCaARU_sample_draw_base","P264-2_108_GRTS_PossibleCaARU_sample_draw_base","P264-2_108_GRTS_PossibleCaARU_sample_draw_base","P273-2_18_GRTS_PossibleCaARU_sample_draw_base","P273-2_18_GRTS_PossibleCaARU_sample_draw_base","P273-2_18_GRTS_PossibleCaARU_sample_draw_base","P273-2_18_GRTS_PossibleCaARU_sample_draw_base","P273-4_20_GRTS_PossibleCaARU_sample_draw_base","P273-4_20_GRTS_PossibleCaARU_sample_draw_base","P273-4_20_GRTS_PossibleCaARU_sample_draw_base","P273-4_20_GRTS_PossibleCaARU_sample_draw_base","P284-1_21_GRTS_PossibleCaARU_sample_draw_base","P284-1_21_GRTS_PossibleCaARU_sample_draw_base","P284-1_21_GRTS_PossibleCaARU_sample_draw_base","P284-1_21_GRTS_PossibleCaARU_sample_draw_base","P284-2_22_GRTS_PossibleCaARU_sample_draw_base","P284-2_22_GRTS_PossibleCaARU_sample_draw_base","P284-2_22_GRTS_PossibleCaARU_sample_draw_base","P284-2_22_GRTS_PossibleCaARU_sample_draw_base","P284-4_24_GRTS_PossibleCaARU_sample_draw_base","P284-4_24_GRTS_PossibleCaARU_sample_draw_base","P284-4_24_GRTS_PossibleCaARU_sample_draw_base","P284-4_24_GRTS_PossibleCaARU_sample_draw_base","P295-3_55_GRTS_PossibleCaARU_sample_draw_base","P295-3_55_GRTS_PossibleCaARU_sample_draw_base","P295-3_55_GRTS_PossibleCaARU_sample_draw_base","P295-3_55_GRTS_PossibleCaARU_sample_draw_base","P302-3_60_GRTS_PossibleCaARU_sample_draw_base","P302-3_60_GRTS_PossibleCaARU_sample_draw_base","P302-3_60_GRTS_PossibleCaARU_sample_draw_base","P302-3_60_GRTS_PossibleCaARU_sample_draw_base","P302-8_61_GRTS_PossibleCaARU_sample_draw_base","P302-8_61_GRTS_PossibleCaARU_sample_draw_base","P302-8_61_GRTS_PossibleCaARU_sample_draw_base","P302-8_61_GRTS_PossibleCaARU_sample_draw_base","P311-1_25_GRTS_PossibleCaARU_sample_draw_base","P311-1_25_GRTS_PossibleCaARU_sample_draw_base","P311-1_25_GRTS_PossibleCaARU_sample_draw_base","P311-1_25_GRTS_PossibleCaARU_sample_draw_base","P311-2_26_GRTS_PossibleCaARU_sample_draw_base","P311-2_26_GRTS_PossibleCaARU_sample_draw_base","P311-2_26_GRTS_PossibleCaARU_sample_draw_base","P311-2_26_GRTS_PossibleCaARU_sample_draw_base","P323-3_29_GRTS_PossibleCaARU_sample_draw_base","P323-3_29_GRTS_PossibleCaARU_sample_draw_base","P323-3_29_GRTS_PossibleCaARU_sample_draw_base","P323-3_29_GRTS_PossibleCaARU_sample_draw_base","P324-6_101_GRTS_PossibleCaARU_sample_draw_base","P324-6_101_GRTS_PossibleCaARU_sample_draw_base","P324-6_101_GRTS_PossibleCaARU_sample_draw_base","P324-6_101_GRTS_PossibleCaARU_sample_draw_base","P348-1_30_GRTS_PossibleCaARU_sample_draw_base","P348-1_30_GRTS_PossibleCaARU_sample_draw_base","P348-1_30_GRTS_PossibleCaARU_sample_draw_base","P348-1_30_GRTS_PossibleCaARU_sample_draw_base","P348-2_31_GRTS_PossibleCaARU_sample_draw_base","P348-2_31_GRTS_PossibleCaARU_sample_draw_base","P348-2_31_GRTS_PossibleCaARU_sample_draw_base","P348-2_31_GRTS_PossibleCaARU_sample_draw_base","P348-3_32_GRTS_PossibleCaARU_sample_draw_base","P348-3_32_GRTS_PossibleCaARU_sample_draw_base","P348-3_32_GRTS_PossibleCaARU_sample_draw_base","P348-3_32_GRTS_PossibleCaARU_sample_draw_base","P349-4_37_GRTS_PossibleCaARU_sample_draw_base","P349-4_37_GRTS_PossibleCaARU_sample_draw_base","P349-4_37_GRTS_PossibleCaARU_sample_draw_base","P349-4_37_GRTS_PossibleCaARU_sample_draw_base","P362-1_38_GRTS_PossibleCaARU_sample_draw_base","P362-1_38_GRTS_PossibleCaARU_sample_draw_base","P362-1_38_GRTS_PossibleCaARU_sample_draw_base","P362-1_38_GRTS_PossibleCaARU_sample_draw_base","Q618-1_42_GRTS_PossibleCaARU_sample_draw_base","Q618-1_42_GRTS_PossibleCaARU_sample_draw_base","Q618-1_42_GRTS_PossibleCaARU_sample_draw_base","Q618-1_42_GRTS_PossibleCaARU_sample_draw_base","Q618-2_43_GRTS_PossibleCaARU_sample_draw_base","Q618-2_43_GRTS_PossibleCaARU_sample_draw_base","Q618-2_43_GRTS_PossibleCaARU_sample_draw_base","Q618-2_43_GRTS_PossibleCaARU_sample_draw_base","Q619-1_131_GRTS_PossibleCaARU_sample_draw_base","Q619-1_131_GRTS_PossibleCaARU_sample_draw_base","Q619-1_131_GRTS_PossibleCaARU_sample_draw_base","Q619-1_131_GRTS_PossibleCaARU_sample_draw_base","Q619-3_133_GRTS_PossibleCaARU_sample_draw_base","Q619-3_133_GRTS_PossibleCaARU_sample_draw_base","Q619-3_133_GRTS_PossibleCaARU_sample_draw_base","Q619-3_133_GRTS_PossibleCaARU_sample_draw_base","Q624-4_150_GRTS_PossibleCaARU_sample_draw_base","Q624-4_150_GRTS_PossibleCaARU_sample_draw_base","Q624-4_150_GRTS_PossibleCaARU_sample_draw_base","Q624-4_150_GRTS_PossibleCaARU_sample_draw_base","Q628-2_47_GRTS_PossibleCaARU_sample_draw_base","Q628-2_47_GRTS_PossibleCaARU_sample_draw_base","Q628-2_47_GRTS_PossibleCaARU_sample_draw_base","Q628-2_47_GRTS_PossibleCaARU_sample_draw_base","Q629-2_153_GRTS_PossibleCaARU_sample_draw_base","Q629-2_153_GRTS_PossibleCaARU_sample_draw_base","Q629-2_153_GRTS_PossibleCaARU_sample_draw_base","Q629-2_153_GRTS_PossibleCaARU_sample_draw_base","Q629-8_156_GRTS_PossibleCaARU_sample_draw_base","Q629-8_156_GRTS_PossibleCaARU_sample_draw_base","Q629-8_156_GRTS_PossibleCaARU_sample_draw_base","Q629-8_156_GRTS_PossibleCaARU_sample_draw_base","Q637-5_160_GRTS_PossibleCaARU_sample_draw_base","Q637-5_160_GRTS_PossibleCaARU_sample_draw_base","Q637-5_160_GRTS_PossibleCaARU_sample_draw_base","Q637-5_160_GRTS_PossibleCaARU_sample_draw_base"],["OFEN","OFEN","OFEN","OFEN","ConTRE","ConTRE","ConTRE","ConSWA","ConSWA","TrFEN","TrFEN","OBOG","OBOG","OBOG","OBOG","OBOG","TrFEN","ConTRE","ConSWA","ConTRE","OBOG","OBOG","OBOG","OBOG","TrBOG","TrBOG","TrBOG","OBOG","TrBOG","TrBOG","OBOG","OBOG","OBOG","OBOG","OBOG","OBOG","OBOG","OBOG","OBOG","OFEN","OBOG","OBOG","OBOG","OBOG","TrBOG","TrBOG","TrBOG","ConSWA","TrBOG","TrBOG","TrBOG","TrBOG","OBOG","OBOG","OBOG","TrBOG","TrFEN","TrFEN","TrFEN","TrFEN","TrBOG","TrBOG","TrBOG","TrBOG","ConSWA","ConSWA","ConSWA","ConSWA","TrBOG","OBOG","OBOG","TrBOG","ConSWA","ConSWA","ConSWA","ConSWA","OFEN","OFEN","OFEN","OFEN","TrBOG","TrBOG","TrBOG","OBOG","OBOG","OBOG","OFEN","OFEN","OFEN","OFEN","OFEN","OFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","XWAT","ConSWA","ConSWA","ConSWA","TrFEN","SpTRE","SpTRE","SpTRE","ConSWA","TrFEN","TrFEN","TrFEN","TrBOG","MixTRE","MixTRE","MixTRE","TrBOG","ConTRE","ConTRE","ConTRE","TrBOG","TrBOG","TrBOG","TrBOG","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","OBOG","OBOG","OBOG","TrFEN","ConTRE","SpTRE","SpTRE","OBOG","ConTRE","WAT","ConTRE","TrFEN","ConSWA","ConSWA","ConSWA","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","TrFEN","ConTRE","ConTRE","ConTRE","ConTRE","ConSWA","ConSWA","ConSWA","ConSWA","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrBOG","TrFEN","TrBOG","TrBOG","TrBOG","OBOG","TrBOG","TrBOG","TrBOG","TrFEN","OBOG","OBOG","OBOG","TrBOG","OBOG","OBOG","OBOG","TrBOG"],[1,0.9447561697266259,0.7690451661973566,0.4875458270442456,1,1,0.8966262806258004,0.6257363120632063,0.6564346733140189,0.7155084452511601,0.6606498752926671,0.3147646184303558,1,1,1,0.5207363380068764,1,0.4019507423297938,0.4123541574387212,0.4175003413786494,1,0.9309747706209678,0.7170344858475638,0.7889585068687139,1,0.8245997451923592,0.6728592016030076,0.6991929191760028,1,0.5691164229559377,0.5460312509818893,0.379343265837591,1,1,0.9996753446401393,0.5293222782939174,1,0.9942519949194426,0.7281799645513138,0.2985952677013513,1,1,1,0.3326431934615349,1,1,0.9363415304085482,0.4775778044973864,1,0.9769213778942012,0.7973879448989714,0.3395760602938623,1,0.9176491676621279,0.5850776121289241,0.5223092570591706,1,1,0.9750712186331868,0.4278371884003935,1,0.8315830757132978,0.7512203359057626,0.3999134766857882,1,0.9999162167992528,0.8534242181186054,0.3581385216747242,1,0.6208284696458658,0.6759833797123772,0.3158135276785617,1,0.7702218795182217,0.7247630599457523,0.341027932916657,1,1,1,0.4643713480088575,1,0.9360918914696712,0.7337536832397213,0.5164913413961422,1,0.5665571235152759,0.6626346939655747,0.4449730499856555,1,1,0.8763959606453335,0.4910649149153572,1,0.912509744549718,0.8234858178448869,0.350664673050075,1,0.9490064935754284,0.7089699921423532,0.4082508931157951,1,0.9336268605433374,0.8118643150171135,0.3601331976794881,1,0.9161766192542022,0.4570248227010311,0.2102651785169245,1,0.9790072283496309,0.8953310260193018,0.331956234826887,1,0.6971443838894176,0.5248999426451121,0.1836690457031784,1,1,0.9865014925308359,0.245544781191549,1,0.8299959827718409,0.5762589685648262,0.8555251865850169,1,1,1,0.5884537365132327,1,0.9135231894027439,0.743475740476652,0.7097074635036,1,0.7706918269413361,0.6312469535068936,0.5149075875194441,1,0.8149645281520322,0.607548103205855,0.3451831878858591,1,0.4624376524901748,0.3421460759624462,0.281238445895175,1,0.4526191901564311,0.53796843990094,0.5687833097783098,1,1,0.9733945900935126,0.4894500863499506,1,1,0.974921748020706,0.5140012074978193,1,1,1,0.9487543695686047,1,0.999742646632944,0.7904652376130165,0.2876967376826992,1,1,0.9893168430952137,0.5710635704856195,1,1,0.9308846631851542,0.3751580572407684,1,0.8556578724874464,0.7764533955917398,0.3864644283670498,1,0.9905908612018834,0.8411816878241943,0.3990976543837545,1,0.7485945871168274,0.6293882477477931,0.4096470530621285,1,1,0.8142047825911943,0.359706055806336,1,1,0.8874475913255171,0.4396807085810022,1,0.9972873384636042,0.9084322540418754,0.5575215410558474,1,0.6840575778682353,0.5353004853019847,0.4052762641642442],["Open Fen","Open Fen","Open Fen","Open Fen","Coniferous Treed","Coniferous Treed","Coniferous Treed","Coniferous Swamp","Coniferous Swamp","Treed Fen","Treed Fen","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Treed Fen","Coniferous Treed","Coniferous Swamp","Coniferous Treed","Open Bog","Open Bog","Open Bog","Open Bog","Treed Bog","Treed Bog","Treed Bog","Open Bog","Treed Bog","Treed Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Bog","Open Fen","Open Bog","Open Bog","Open Bog","Open Bog","Treed Bog","Treed Bog","Treed Bog","Coniferous Swamp","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Open Bog","Open Bog","Open Bog","Treed Bog","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Treed Bog","Open Bog","Open Bog","Treed Bog","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Open Fen","Open Fen","Open Fen","Open Fen","Treed Bog","Treed Bog","Treed Bog","Open Bog","Open Bog","Open Bog","Open Fen","Open Fen","Open Fen","Open Fen","Open Fen","Open Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Turbid Water","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Treed Fen","Sparse Treed","Sparse Treed","Sparse Treed","Coniferous Swamp","Treed Fen","Treed Fen","Treed Fen","Treed Bog","Mixed Treed","Mixed Treed","Mixed Treed","Treed Bog","Coniferous Treed","Coniferous Treed","Coniferous Treed","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Open Bog","Open Bog","Open Bog","Treed Fen","Coniferous Treed","Sparse Treed","Sparse Treed","Open Bog","Coniferous Treed","Clear Open Water","Coniferous Treed","Treed Fen","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Treed Fen","Coniferous Treed","Coniferous Treed","Coniferous Treed","Coniferous Treed","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Coniferous Swamp","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Bog","Treed Fen","Treed Bog","Treed Bog","Treed Bog","Open Bog","Treed Bog","Treed Bog","Treed Bog","Treed Fen","Open Bog","Open Bog","Open Bog","Treed Bog","Open Bog","Open Bog","Open Bog","Treed Bog"],[null,"OBOG","OBOG","OBOG",null,null,"WAT","ConTRE","TrFEN","ConSWA","TrBOG","TrBOG",null,null,null,"ConSWA",null,"ConSWA","ConTRE","ConSWA",null,"TrBOG","TrBOG","TrBOG",null,"OBOG","OBOG","TrBOG",null,"OBOG","TrBOG","TrBOG",null,null,"TrBOG","TrBOG",null,"OFEN","OFEN","TrBOG",null,null,null,"OFEN",null,null,"ConSWA","ConTRE",null,"TrFEN","TrFEN","OBOG",null,"TrBOG","TrBOG","OBOG",null,null,"TrBOG","TrBOG",null,"OBOG","OBOG","OBOG",null,"WAT","WAT","TrBOG",null,"TrBOG","OFEN","OBOG",null,"TrFEN","TrFEN","TrBOG",null,null,null,"OBOG",null,"ConSWA","ConSWA","TrBOG",null,"OFEN","OBOG","OBOG",null,null,"OBOG","OBOG",null,"OFEN","OFEN","TrBOG",null,"XWAT","XWAT","TrFEN",null,"TrFEN","TrFEN","ConSWA",null,"MixTRE","ConTRE","ConTRE",null,"ConSWA","ConSWA","ConSWA",null,"ConTRE","ConTRE","MixTRE",null,null,"TrFEN","ConTRE",null,"TrFEN","TrFEN","TrBOG",null,null,null,"TrBOG",null,"WAT","WAT","WAT",null,"TrBOG","TrBOG","ConSWA",null,"TrBOG","TrBOG","OBOG",null,"ConTRE","ConTRE","ConSWA",null,"ConTRE","WAT","ConSWA",null,null,"TrFEN","ConSWA",null,null,"ConSWA","ConSWA",null,null,null,"WAT",null,"WAT","WAT","TrBOG",null,null,"TrBOG","ConSWA",null,null,"WAT","TrBOG",null,"ConSWA","ConSWA","ConSWA",null,"ConSWA","ConSWA","ConSWA",null,"OBOG","OBOG","TrBOG",null,null,"TrFEN","TrBOG",null,null,"TrFEN","TrBOG",null,"TrBOG","TrBOG","OBOG",null,"TrBOG","TrBOG","OBOG"],[null,0.05524383027337415,0.2309548338026434,0.4310945417953735,null,null,0.08051196647988278,0.1775428255565737,0.343565326685981,0.2844915547488399,0.1700866994238418,0.2118944294319371,null,null,null,0.2070182491103923,null,0.3795432483745871,0.3409968754873233,0.4099522856928798,null,0.06902522937903227,0.2829655141524362,0.2066145083159987,null,0.1754002548076407,0.3271407983969923,0.2495722731330259,null,0.4308835770440623,0.4504729584077521,0.2556174627711564,null,null,0.0003246553598606763,0.3851566538501198,null,0.005748005080557367,0.2277642789469607,0.2314029124397048,null,null,null,0.2745231954368895,null,null,0.06365846959145179,0.2345641266827601,null,0.0230786221057988,0.2026117150737094,0.3363142163757261,null,0.08235083233787209,0.3936027750838166,0.1985054585796267,null,null,0.02492878136681321,0.3130733284754675,null,0.1221413454575744,0.1587546744831235,0.3166200709458805,null,8.378320074717227e-05,0.1439045954004808,0.3215112576105315,null,0.2398918899118938,0.1686124847039739,0.3009461726090783,null,0.2297781204817782,0.2752369400542476,0.247909486535186,null,null,null,0.3246149149902987,null,0.06390810853032881,0.2662463167602787,0.2748820544850199,null,0.4334428764847241,0.3373653060344253,0.3523996123697468,null,null,0.09989117330927183,0.2112445421239287,null,0.087490255450282,0.1765141821551131,0.2205624527630888,null,0.05099350642457159,0.2544463315538566,0.2567030187814696,null,0.06637313945666252,0.1881356849828865,0.2328694785123921,null,0.06499662828631897,0.2486614927003927,0.1859773267800632,null,0.02099277165036911,0.0796313208700898,0.2576860306777511,null,0.3028556161105824,0.4377397695768652,0.1786309224779519,null,null,0.0115166080935228,0.223605199376902,null,0.170004017228159,0.4237410314351739,0.1228342888143519,null,null,null,0.2178429390298174,null,0.08647681059725608,0.256524259523348,0.1182663034301224,null,0.2293081730586639,0.3134350735151368,0.2219042243194115,null,0.1850354718479677,0.3924518967941451,0.2028590970830381,null,0.4379448193012902,0.3218240377452424,0.1927771203248567,null,0.3393439446197643,0.2641867194461706,0.2809063320250177,null,null,0.02660540990648742,0.4228841068414847,null,null,0.02507825197929408,0.4056866644463482,null,null,null,0.01570374029756975,null,0.0002573533670560204,0.1819032737519831,0.2380112258985458,null,null,0.01068315690478626,0.2129735933106917,null,null,0.06911533681484582,0.3051129978370093,null,0.1443421275125536,0.2235466044082603,0.1821905054200746,null,0.009409138798116574,0.1588183121758057,0.2676438353001541,null,0.2514054128831726,0.2833163226676207,0.2187649035571706,null,null,0.1090290402376784,0.3080274173105141,null,null,0.1125524086744829,0.3286495899026201,null,0.002712661536395784,0.09156774595812459,0.1997008887033629,null,0.3159424221317648,0.4646995146980153,0.3066590096957359],[null,"Open Bog","Open Bog","Open Bog",null,null,"Clear Open Water","Coniferous Treed","Treed Fen","Coniferous Swamp","Treed Bog","Treed Bog",null,null,null,"Coniferous Swamp",null,"Coniferous Swamp","Coniferous Treed","Coniferous Swamp",null,"Treed Bog","Treed Bog","Treed Bog",null,"Open Bog","Open Bog","Treed Bog",null,"Open Bog","Treed Bog","Treed Bog",null,null,"Treed Bog","Treed Bog",null,"Open Fen","Open Fen","Treed Bog",null,null,null,"Open Fen",null,null,"Coniferous Swamp","Coniferous Treed",null,"Treed Fen","Treed Fen","Open Bog",null,"Treed Bog","Treed Bog","Open Bog",null,null,"Treed Bog","Treed Bog",null,"Open Bog","Open Bog","Open Bog",null,"Clear Open Water","Clear Open Water","Treed Bog",null,"Treed Bog","Open Fen","Open Bog",null,"Treed Fen","Treed Fen","Treed Bog",null,null,null,"Open Bog",null,"Coniferous Swamp","Coniferous Swamp","Treed Bog",null,"Open Fen","Open Bog","Open Bog",null,null,"Open Bog","Open Bog",null,"Open Fen","Open Fen","Treed Bog",null,"Turbid Water","Turbid Water","Treed Fen",null,"Treed Fen","Treed Fen","Coniferous Swamp",null,"Mixed Treed","Coniferous Treed","Coniferous Treed",null,"Coniferous Swamp","Coniferous Swamp","Coniferous Swamp",null,"Coniferous Treed","Coniferous Treed","Mixed Treed",null,null,"Treed Fen","Coniferous Treed",null,"Treed Fen","Treed Fen","Treed Bog",null,null,null,"Treed Bog",null,"Clear Open Water","Clear Open Water","Clear Open Water",null,"Treed Bog","Treed Bog","Coniferous Swamp",null,"Treed Bog","Treed Bog","Open Bog",null,"Coniferous Treed","Coniferous Treed","Coniferous Swamp",null,"Coniferous Treed","Clear Open Water","Coniferous Swamp",null,null,"Treed Fen","Coniferous Swamp",null,null,"Coniferous Swamp","Coniferous Swamp",null,null,null,"Clear Open Water",null,"Clear Open Water","Clear Open Water","Treed Bog",null,null,"Treed Bog","Coniferous Swamp",null,null,"Clear Open Water","Treed Bog",null,"Coniferous Swamp","Coniferous Swamp","Coniferous Swamp",null,"Coniferous Swamp","Coniferous Swamp","Coniferous Swamp",null,"Open Bog","Open Bog","Treed Bog",null,null,"Treed Fen","Treed Bog",null,null,"Treed Fen","Treed Bog",null,"Treed Bog","Treed Bog","Open Bog",null,"Treed Bog","Treed Bog","Open Bog"],[null,1,1,0.9186403688396192,null,null,0.9771382471056832,0.80327913761978,1,1,0.8307365747165089,0.5266590478622929,null,null,null,0.7277545871172687,null,0.781493990704381,0.7533510329260444,0.8274526270715292,null,1,1,0.9955730151847126,null,1,1,0.9487651923090287,null,1,0.9965042093896415,0.6349607286087474,null,null,1,0.9144789321440372,null,1,0.9559442434982746,0.5299981801410562,null,null,null,0.6071663888984244,null,null,1,0.7121419311801465,null,1,0.9999996599726808,0.6758902766695885,null,1,0.9786803872127408,0.7208147156387973,null,null,1,0.7409105168758611,null,0.9537244211708722,0.9099750103888862,0.7165335476316688,null,1,0.9973288135190861,0.6796497792852556,null,0.8607203595577596,0.8445958644163511,0.6167597002876399,null,1,1,0.5889374194518429,null,null,null,0.7889862629991562,null,1,1,0.7913733958811621,null,1,1,0.7973726623554023,null,null,0.9762871339546053,0.7023094570392859,null,1,1,0.5712271258131638,null,1,0.9634163236962099,0.6649539118972647,null,1,1,0.5930026761918802,null,0.9811732475405213,0.7056863154014238,0.3962425052969877,null,1,0.9749623468893917,0.5896422655046381,null,1,0.9626397122219772,0.3622999681811303,null,null,0.9980181006243587,0.4691499805684509,null,1,1,0.9783594753993687,null,null,null,0.8062966755430501,null,1,1,0.8279737669337225,null,1,0.9446820270220304,0.7368118118388556,null,1,1,0.5480422849688973,null,0.900382471791465,0.6639701137076885,0.4740155662200317,null,0.7919631347761954,0.8021551593471106,0.8496896418033275,null,null,1,0.9123341931914353,null,null,1,0.9196878719441675,null,null,null,0.9644581098661744,null,1,0.9723685113649996,0.5257079635812451,null,null,1,0.7840371637963113,null,null,1,0.6802710550777777,null,1,1,0.5686549337871244,null,1,1,0.6667414896839086,null,1,0.9127045704154138,0.6284119566192992,null,null,0.9232338228288728,0.6677334731168501,null,null,1,0.7683302984836222,null,1,1,0.7572224297592103,null,1,1,0.7119352738599801]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>scale<\/th>\n      <th>fullID<\/th>\n      <th>primary_category_code<\/th>\n      <th>primary_prop<\/th>\n      <th>primary_label<\/th>\n      <th>secondary_category_code<\/th>\n      <th>secondary_prop<\/th>\n      <th>secondary_label<\/th>\n      <th>prop_sum<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[4,7,9]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"scale","targets":1},{"name":"fullID","targets":2},{"name":"primary_category_code","targets":3},{"name":"primary_prop","targets":4},{"name":"primary_label","targets":5},{"name":"secondary_category_code","targets":6},{"name":"secondary_prop","targets":7},{"name":"secondary_label","targets":8},{"name":"prop_sum","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>We can plot the results with “dodged” ggplot2 barplots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>my_pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'#c7e9b4'</span>,<span class="st">'#7fcdbb'</span>,<span class="st">'#41b6c4'</span>,<span class="st">'#1d91c0'</span>,<span class="st">'#225ea8'</span>,<span class="st">'#0c2c84'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(res) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> label, <span class="at">y =</span> prop, <span class="at">fill =</span> scale, <span class="at">colour =</span> scale), </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">stat =</span> <span class="st">"identity"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">20</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Land Use Class"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Scale"</span>, <span class="at">colour =</span> <span class="st">"Scale"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> my_pal) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_pal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" data-fig-pos="H" width="1248"></p>
</figure>
</div>
</div>
</div>
<p>Removing the land use classes than are not present around sites, we get a slightly easier graph to read.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>only_at_sites <span class="ot">&lt;-</span> res <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(prop <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(scale <span class="sc">!=</span> <span class="st">"Ecodistrict"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(label)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>res_filt <span class="ot">&lt;-</span> res <span class="sc">|&gt;</span> </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(label <span class="sc">%in%</span> only_at_sites)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(res_filt) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> label, <span class="at">y =</span> prop, <span class="at">fill =</span> scale, <span class="at">colour =</span> scale), </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.8</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">stat =</span> <span class="st">"identity"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">20</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Land Use Class"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Scale"</span>, <span class="at">colour =</span> <span class="st">"Scale"</span>) <span class="sc">+</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> my_pal) <span class="sc">+</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> my_pal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" data-fig-pos="H" width="1248"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>